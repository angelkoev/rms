<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/commons::head}"></head>
<!--&lt;!&ndash; Bootstrap v4.0.0 CSS &ndash;&gt;-->
<!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">-->

<!--&lt;!&ndash; Bootstrap v4.0.0 JS &ndash;&gt;-->
<!--<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>-->
<!--<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>-->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<body>
<header th:replace="~{fragments/commons::nav}"></header>
<main>

    <br>
    <br>
    <div class="menu-ordered">
        <h1>За сега сте си избрали:</h1>
        <div th:each="orderDrinks : ${preorderDrinks}" th:object="${orderDrinks}">
            <span th:text="|${orderDrinks.name} (${orderDrinks.volume}мл)    Цена: ${orderDrinks.price}лв| "></span>

<!--        </div>-->
    </div>
    <div id="menu-main">
        <!--    <div class="col-5 bg-dark rounded m-auto" style="height: 50vh">-->
        <div id="drinksContainer" class="container bg-gray box" style="height: 50vh">
            <h3 class="mySticky bg-gray text-dark rounded">Избери напитка</h3>

            <div class="dropdown mt-3 choose-button">
                <button class="btn btn-warning dropdown-toggle" type="button" id="drinkDropdown" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                    Избери напитка
                </button>
                <div class="dropdown-menu" aria-labelledby="drinkDropdown">

                    <!-- Iterate over each drink type -->
                    <div th:each="drinkType : ${T(com.rms.model.entity.DrinkTypeEnum).values()}">
                        <div class="dropdown-submenu">
                            <a class="dropdown-item dropdown-toggle" th:text="${drinkType.getName()}" href="#"></a>

                            <!-- Iterate over drinks for the current type -->
                            <div class="dropdown-menu">
                                <div th:each="drink : ${allDrinksView}" th:object="${drink}">
                                    <div th:if="${drink.type == drinkType}">
                                        <a class="dropdown-item" th:href="@{/order/drink/{id}(id=${drink.id})}">
                                            <span th:text="|${drink.name} (${drink.volume}мл)    Цена: ${drink.price}лв| "></span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div id="foodsContainer" class="container bg-gray box" style="height: 50vh">
            <!--    <div class="col-5 bg-dark rounded m-auto" style="height: 50vh">-->
            <h3 class="mySticky bg-gray text-dark rounded">Избери храна</h3>

            <div class="dropdown mt-3 choose-button">
                <button class="btn btn-warning dropdown-toggle" type="button" id="foodDropdown" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                    Избери храна
                </button>
                <div class="dropdown-menu dropdown-menu-food" aria-labelledby="foodDropdown">

                    <!-- Iterate over each drink type -->
                    <div th:each="foodType : ${T(com.rms.model.entity.FoodTypeEnum).values()}">
                        <div class="dropdown-submenu">
                            <a class="dropdown-item dropdown-toggle" th:text="${foodType.getName()}" href="#"></a>

                            <!-- Iterate over drinks for the current type -->
                            <div class="dropdown-menu dropdown-menu-food">
                                <div th:each="food : ${allFoodsView}" th:object="${food}">
                                    <div th:if="${food.type == foodType}">
                                        <a class="dropdown-item" th:href="@{/order/food/{id}(id=${food.id})}">
                                            <span th:text="|${food.name} (${food.size}гр - ${food.kcal}kcal)    Цена: ${food.price}лв| "></span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <form id="register-form" class="form"
          th:method="POST"
          th:action="@{/order/new}"
          th:object="${preorderDTO}">
    <div class="form-group button-holder d-flex justify-content-center">
        <input type="submit" name="submit" class="btn btn-info btn-md justify-content-center" value="Направи поръчка">
    </div>
    </form>

    <script>
        // Add custom script for multi-level dropdown
        $('.dropdown-submenu a.dropdown-toggle').on('click', function (e) {
            $(this).next('.dropdown-menu').toggle();
            $('.dropdown-submenu .dropdown-menu').not($(this).next()).hide(); // Close other submenus
            e.stopPropagation();
        });
    </script>

</main>
<footer th:replace="~{fragments/commons::footer}"></footer>
</body>
</html>
